---
title: "Chapter 1: Hello Data"
output: 
  revealjs::revealjs_presentation:
    fig_width: 14 
    fig_height: 7
    self_contained: true
    theme: night
    highlight: zenburn
    css: slidesdjh.css
    center: false
    transition: slide
    reveal_options:
      controls: true
      progress: false
      width: 1080
      height: 540
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(comment = NA)
options(width = 100)
```

# Overview

- 1.1 Case study: Using stents to prevent strokes
- 1.2 Data basics
    - 1.2.1 Observations, variables, and data matrices
    - 1.2.2 Types of variables
    - 1.2.3 Relationships between variables
    - 1.2.4 Explanatory and response variables
    - 1.2.5 Observational studies and experiments

# 1.1 Case study: Using stents to prevent strokes

> Does the use of stents reduce the risk of stroke?

-   **Treatment group**. Patients in the treatment group received a stent and medical management. The medical management included medications, management of risk factors, and help in lifestyle modification.
-   **Control group**. Patients in the control group received the same medical management as the treatment group, but they did not receive stents.

Researchers randomly assigned 224 patients to the treatment group and 227 to the control group.



# 1.2 Data basics

## 1.2.1 Observations, variables, and data matrices

## 1.2.2 Types of variables

```{r, echo=FALSE}
par_og <- par(no.readonly = TRUE) # save original par
par(mar = rep(0, 4))
plot(c(-0.15, 1.3), 0:1, type = "n", axes = FALSE)

text(0.6, 0.9, "all variables", cex=3)
rect(0.4, 0.8, 0.8, 1)

text(0.25, 0.5, "numerical", cex=3)
rect(0.1, 0.4, 0.4, 0.6)
arrows(0.45, 0.78, 0.34, 0.62, length = 0.08)

text(0.9, 0.5, "categorical", cex=3)
rect(0.73, 0.4, 1.07, 0.6)
arrows(0.76, 0.78, 0.85, 0.62, length = 0.08)

text(0, 0.1, "discrete", cex=3)
rect(-0.17, 0, 0.17, 0.2)
arrows(0.13, 0.38, 0.05, 0.22, length = 0.08)

text(0.39, 0.1, "continuous", cex=3)
rect(0.25, 0, 0.53, 0.2)
arrows(0.35, 0.38, 0.4, 0.22, length = 0.08)

text(0.77, 0.105, "ordinal", cex=3)
rect(0.64, 0, 0.9, 0.2)
arrows(0.82, 0.38, 0.77, 0.22, length = 0.08)

text(1.12, 0.1, "nominal", cex=3)
rect(0.99, 0, 1.25, 0.2)
arrows(1.02, 0.38, 1.1, 0.22, length = 0.08)
par(par_og) # restore original par
```

## 1.2.3 Relationships between variables

## 1.2.4 Explanatory and response variables

## 1.2.5 Observational studies and experiments

**Association** $\neq$ **Causation.**

# Exercises

## Air pollution 

Researchers collected data to examine the relationship between air pollutants and preterm births in Southern California.
During the study air pollution levels were measured by air quality monitoring stations.
Specifically, levels of carbon monoxide were recorded in parts per million, nitrogen dioxide and ozone in parts per hundred million, and coarse particulate matter (PM$_{10}$) in $\mu g/m^3$.
Length of gestation data were collected on 143,196 births between the years 1989 and 1993, and air pollution exposure during gestation was calculated for each birth.
The analysis suggested that increased ambient PM$_{10}$ and, to a lesser degree, CO concentrations may be associated with the occurrence of preterm births. 

---

Researchers collected data to examine the relationship between air pollutants and preterm births in Southern California.
During the study air pollution levels were measured by air quality monitoring stations.
Specifically, levels of carbon monoxide were recorded in parts per million, nitrogen dioxide and ozone in parts per hundred million, and coarse particulate matter (PM$_{10}$) in $\mu g/m^3$.
Length of gestation data were collected on 143,196 births between the years 1989 and 1993, and air pollution exposure during gestation was calculated for each birth.
The analysis suggested that increased ambient PM$_{10}$ and, to a lesser degree, CO concentrations may be associated with the occurrence of preterm births. 

a.  Identify the main research question of the study.
b.  Who are the subjects in this study, and how many are included?
c.  What are the variables in the study? Identify each variable as numerical or categorical. If numerical, state whether the variable is discrete or continuous. If categorical, state whether the variable is ordinal.
d. Which is the explanatory variable, and which is the response?


## Migraines and acupuncture

A migraine is a particularly painful type of headache, which patients sometimes wish to treat with acupuncture. 
To determine whether acupuncture relieves migraine pain, researchers conducted a randomized controlled study where 89 individuals who identified as female diagnosed with migraine headaches were randomly assigned to one of two groups: treatment or control. 
Forty-three (43) patients in the treatment group received acupuncture that is specifically designed to treat migraines. 
Forty-six (46) patients in the control group received placebo acupuncture (needle insertion at non-acupoint locations). 
Twenty-four (24) hours after patients received acupuncture, they were asked if they were pain free. 
Results are summarized in the contingency table below. 
Also provided is a figure from the original paper displaying the appropriate area (M) versus the inappropriate area (S) used in the treatment of migraine attacks.

---

<img src="../exercises/images/earacupuncture.png" alt="Figure from the original paper displaying the appropriate area (M) versus the inappropriate area (S) used in the treatment of migraine attacks." class="cover" width="30%"/>  

---


```{r echo=FALSE, message=FALSE}
library(openintro)
library(tidyverse)
library(tools)
library(knitr)
library(kableExtra)
migraine %>%
  mutate(
    group = toTitleCase(as.character(group)),
    pain_free = toTitleCase(as.character(pain_free))
  ) %>%
  count(group, pain_free) %>%
  pivot_wider(names_from = pain_free, values_from = n) %>%
  rename(Group = group) %>%
  kbl(linesep = "", booktabs = TRUE) %>%
  kable_styling(bootstrap_options = c("striped", "condensed"), 
                latex_options = "HOLD_position",
                full_width = FALSE) %>%
  add_header_above(c("", "Pain free?" = 2)) %>%
  column_spec(1:3, width = "5em")
```

a.  What percent of patients in the treatment group were pain free 24 hours after receiving acupuncture?

b.  What percent were pain free in the control group?

c.  In which group did a higher percent of patients become pain free 24 hours after receiving acupuncture?

d.  Your findings so far might suggest that acupuncture is an effective treatment for migraines for all people who suffer from migraines.
    However, this is not the only possible conclusion.
    What is one other possible explanation for the observed difference between the percentages of patients that are pain free 24 hours after receiving acupuncture in the two groups?
    
e.  What are the explanatory and response variables in this study?


